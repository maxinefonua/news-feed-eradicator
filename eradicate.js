var quoteList = [ 
	{
		quote: "I am not a prophet<br>but sometimes I have prophetic dreams.",
		source: "Huey"
	},
	{
		quote: "Jesus was black<br>Ronald Reagan was the Devil<br>and the government is lying about 9/11.<br>Thank you for your time and good night.",
		source: "Huey"
	},
	{
		quote: "Granddad, you can't tame the White Supremacist power structure with cheese!",
		source: "Huey"
	},
	{
		quote: "These people aren't worried about us.<br>They're not worried about anything.<br>They're rich. No matter what happens,<br>these people just keep applauding.",
		source: "Huey"
	},
	{
		quote: "Obi-Wan Kenobi once said:<br> Your eyes can deceive you, don't trust them.<br><br>Seems to be getting harder distinguishing reality<br>from the illusions that people make for us<br>or from the ones that we make for ourselves.<br>I don't know, maybe that's part of the plan.<br>To make me think I'm crazy.<br><br>Itâ€™s working.",
		source: "Huey"
	},
	{
		quote: "That night I dreamt of a blind swordsman.<br>He knows my every move, yet he cannot see.<br>As my mind fights to make sense of the impossible,<br>he is turning my sight into a liability.<br><br>He has no just cause to want my life.<br>There is no forethought, no logic in his actions.<br>This isn't just any swordsman.<br>This is the blind nigga samurai.",
		source: "Huey"
	},
	{
		quote: "Vision?<br>What do you know about my vision?<br>My vision would turn your world upside down,<br>tear asunder your illusions and send the sanctuary<br>of your own ignorance crashing down around you.<br><br>Now ask yourself: are you really ready<br>to see that vision?<br><br>...I want it in writing.",
		source: "Huey"
	},
	{
		quote: "Game recognize game, Granddad<br>and you lookin' kinda unfamiliar right now.",
		source: "Riley"
	},
	{
		quote: "First of all, imma live forever!<br>But if I do die,<br>I'm gon' smack God upside the head<br>and gon' tell him<br>to get me a grilled-cheese sandwich<br>and some tacos!",
		source: "Riley"
	},
	{
		quote: "Operation Black Steel - the mission to liberate Shabazz K. Milton-Berle - was aborted...<br>because I couldn't get a ride.",
		source: "Huey"
	},
	{
		quote: "Maybe there are forces in this universe<br>we don't understand<br><br>But I still believe <br>we make our own miracles<br><br>What makes your god<br>any less made up than his?",
		source: "Huey"
	},
	{
		quote: "I am the stone that the builder refused.",
		source: ""
	},
	{
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Granddad"
	},
	{
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Huey"
	},
	{
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Huey"
	},
	{
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Huey"
	},
	{
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Huey"
	},
	{
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Huey"
	},
	{
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Huey"
	},
	{
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Huey"
	},
	{
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Huey"
	},
	{
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Huey"
	},
	{
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Huey"
	},
	{
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Huey"
	},
	{
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Huey"
	},
	{
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Huey"
    },
    {
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Huey"
	},
	{
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Huey"
    },
	{
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Huey"
    },
    {
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Huey"
	},
	{
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Huey"
	},
	{
		quote: "How many times have I told you, you better not even <i>dream</i> about tellin' white folk the truth! You understand me?<br><br>Shoot, makin' white people riot. You better learn how to lie like me! I'm gonna find me a white man and lie to him right now!",
		source: "Huey"
	}
];

var selectedQuote = quoteList[Math.floor(Math.random() * quoteList.length)];

var quoteDiv, quoteText, quoteSource, fbLink, infoPanel, taikoPic;

quoteDiv = $("<div class='nfe-quote'/>");

quoteText = $("<p>"+selectedQuote.quote+"</p>")
    .addClass('nfe-quote-text')
    .appendTo(quoteDiv);

quoteSource = $("<p> "+selectedQuote.source+"</p>")
    .addClass('nfe-quote-source')
    .appendTo(quoteDiv);


// Info panel, hidden by default
infoPanel = $("<div class='nfe-info-panel'></div>")
    .hide()
    .appendTo(quoteDiv);

var hideInfoPanel = function(){
    $('div.nfe-info-panel').hide();
}

var extensionURL = function(relativeURL){
    if(window.chrome !== undefined){
        // Chrome extension
        return chrome.extension.getURL(relativeURL);
    }else{
        // Firefox extension
        return self.options.urls[relativeURL];
    }
}

fbLink = $("<a href='javascript:;'>.</a>")
    .addClass('nfe-info-link')
    .on('click', function(){
      var handleClose = function() {
        $('.nfe-close-button').on('click', hideInfoPanel);
      };
      var url = 'info-panel.html';

      if (window.chrome !== undefined) {
        // Chrome extension
        infoPanel.load(chrome.extension.getURL(url),
                       handleClose);
      } else {
        // Firefox extension
        self.port.emit('requestUrl', url);
        self.port.once(url, function(data) {
          console.log("Received data for ", url);
          infoPanel.html(data);
          handleClose();
        });
      }
      infoPanel.show();
    })
	.appendTo(quoteDiv);

// This delay ensures that the elements have been created by Facebook's
// scripts before we attempt to replace them
setInterval(function(){
    // Replace the news feed
	$("div#pagelet_home_stream").replaceWith(quoteDiv);
	$("div[id^='topnews_main_stream']").replaceWith(quoteDiv);

    // Delete the ticker
    $("div#pagelet_ticker").remove();

    // Delete the trending box
    $("div#pagelet_trending_tags_and_topics").remove();
}, 1000);


